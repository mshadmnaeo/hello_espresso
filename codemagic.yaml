# Check out https://docs.codemagic.io/getting-started/yaml/for more information

workflows:
    native-android:
        name: Android Espresso   
        scripts:
            - name: Set Android SDK location
              script: |
                echo "sdk.dir=$HOME/programs/android-sdk-macosx" > "$FCI_BUILD_DIR/local.properties"
            - name: Build Android debug APK
              script: |
                rm -f ~/.android/debug.keystore
                keytool -genkeypair \
                  -alias androiddebugkey \
                  -keypass android \
                  -keystore ~/.android/debug.keystore \
                  -storepass android \
                  -dname 'CN=Android Debug,O=Android,C=US' \
                  -keyalg 'RSA' \
                  -keysize 2048 \
                  -validity 10000
            - name: Build Android debug APK
              script: |
                ./gradlew assembleDebug
        artifacts:
            - app/build/outputs/**/*.apk
        publishing:
            email:
                recipients:
                    - sbis1999@gmail.com
